(function e(t,n,r){function a(c,i){if(!n[c]){if(!t[c]){var u=typeof require=="function"&&require;if(!i&&u)return u(c,!0);if(o)return o(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[c]={exports:{}};t[c][0].call(s.exports,function(e){var n=t[c][1][e];return a(n?n:e)},s,s.exports,e,t,n,r)}return n[c].exports}var o=typeof require=="function"&&require;for(var c=0;c<r.length;c++)a(r[c]);return a})({1:[function(e,t,n){(function(e){"use strict";var t=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a]}return e};Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof e!=="undefined"?e["Rx"]:null;var a=typeof window!=="undefined"?window["Immutable"]:typeof e!=="undefined"?e["Immutable"]:null;var o=r.BehaviorSubject;var c=r.Subject;var i;(function(e){e[e["MappedReducer"]="MappedReducer"]="MappedReducer";e[e["GlobalReducer"]="GlobalReducer"]="GlobalReducer"})(i=n.ReducerTypes||(n.ReducerTypes={}));function u(e,n,u,f,s){var l=T(e);var p=new o(l);var d=new o({});var v=new c;v.scan(function(e,t){return Object.assign({},e,t)},{}).share().subscribe(d);var h=new c;var y=new o([]);var w=new c;w.scan(function(e,t){return e.concat(t)},[]).share().subscribe(y);var b=new o([]);var g=new c;g.scan(function(e,t){return e.concat(t)},[]).share().subscribe(b);var m=new o([]);var O=new c;O.scan(function(e,t){return e.concat(t)},[]).share().subscribe(m);var N=h.do(function(e){if(!k(e)){return console.error("Please provide an object with at least a `type` property")}if(typeof e.type!=="string"){return console.error("Action was missing a `type` property",e)}}).withLatestFrom(y,b,function(e,t,n){var r=n.filter(function(t){return t.name===e.type});return{action:e,reducers:r.concat(t)}}).scan(function(e,t){var n=t.action,r=t.reducers;var a=n.type||(typeof n==="string"?n:"");if(a.indexOf("@@NS-INIT")===0){return e.setIn(n.payload.path,T((n.payload||{}).value))}else{return r.reduce(function(e,t){var r=t.type===i.MappedReducer?n.payload:n;return e.updateIn(t.path,function(n){return t.fns.reduce(function(t,n){return n.call(null,t,r,e)},n)})},e)}},l).share();N.catch(function(e){return r.Observable.throw(e)}).subscribe(p);var S=h.withLatestFrom(p,function(e,t){return{action:e,state:t}});var x={state$:p,action$:h,actionsWithState$:S,actionsWithResultingStateUpdate$:S};S.withLatestFrom(m).filter(function(e){var t=e[0],n=e[1];return n.length>0}).flatMap(function(e){var t=e[0],n=t.action,a=t.state;var o=e[1];var c=n.type;var i=o.filter(function(e){return e.name===c});var u=i.map(function(e){return{type:e.targetName,payload:a.getIn(e.path,U({})).toJS(),via:"[response to ("+c+")]"}});return r.Observable.from(u)}).subscribe(function(e){return R(e)});function R(e){if(Array.isArray(e)){return e.forEach(function(e){h.onNext(e)})}return h.onNext(e)}function j(e){_(e).forEach(function(e){if(typeof e==="function"){w.onNext({path:[],fns:[].concat(e).filter(Boolean)})}if(k(e)){if(e.state){if(e.reducers){Object.keys(e.state).forEach(function(t){j({path:t,fns:e.reducers})})}if(e.effects){I(e.effects)}B(e.state);return}if(e.path&&e.reducers){Object.keys(e.reducers).forEach(function(t){var n=e.reducers[t];g.onNext({path:[].concat(e.path),fns:[n],name:t,type:i.MappedReducer})});return}if(e.path&&e.fns){w.onNext({path:[].concat(e.path).filter(Boolean),fns:[].concat(e.fns).filter(Boolean)})}else{for(var t in e){w.onNext({path:[].concat(t).filter(Boolean),fns:[].concat(e[t]).filter(Boolean)})}}}})}function I(e){var n={ofType:function(e){return S.filter(function(t){return t.action.type===e})}};var r=Object.assign({},x,d.getValue());_(e).forEach(function(e){e.call(null,n,r).map(function(n){return t({},n,{via:"[effect]",name:e.name||""})}).forEach(function(e){R(e)})})}function E(e){_(e).forEach(function(e){e.call(null,J)})}function M(e){_(e).forEach(function(e){v.onNext(e)})}function B(e){for(var t in e){R({type:"@@NS-INIT("+t+")",payload:{path:[t],value:e[t]}})}}function $(e){_(e).forEach(function(e){Object.keys(e).forEach(function(t){var n=e[t];O.onNext({name:t,path:[].concat(n.path).filter(Boolean),targetName:n.action})})})}var J={state$:p,action$:h,actionsWithState$:S,actionsWithResultingStateUpdate$:S,register:function(e){var t=e.state,n=e.reducers,r=e.effects,a=e.responses;if(n){j(n)}if(r){I(r)}if(t){B(t)}if(a){$(a)}return J},addReducers:function(e){j(e);return J},dispatch:function(e){R(e);return J},getState:function(e){var t=_(e);return p.getValue().getIn(t,U({}))},toJS:function(e){var t=_(e);return p.getValue().getIn(t,U({})).toJS()},toJSON:function(e){var t=_(e);return p.getValue().getIn(t,U({})).toJSON()},addMiddleware:function(e){E(e);return J},once:function(e){var t=_(e);return S.filter(function(e){return t.indexOf(e.action.type)>-1}).take(1)},changes:function(e){var t=_(e);return p.map(function(e){return e.getIn(t)}).distinctUntilChanged().skip(1)}};j(n);I(u);E(f);M(s);function T(e){return a.Map.isMap(e)?e:a.fromJS(e||{})}function _(e){return[].concat(e).filter(Boolean)}function k(e){var t="[object Object]";return Object.prototype.toString.call(e)===t}function U(e){return a.Map(e)}return J}n.createStore=u;n.default=u;if(window&&typeof window.staunch==="undefined"){window.staunch={createStore:u}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);
//# sourceMappingURL=browser.min.js.map

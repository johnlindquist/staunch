(function e(t,n,r){function a(u,c){if(!n[u]){if(!t[u]){var i=typeof require=="function"&&require;if(!c&&i)return i(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return a(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}var o=typeof require=="function"&&require;for(var u=0;u<r.length;u++)a(r[u]);return a})({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=e("./index");function a(e,t,n,a){return t.do(function(e){if(!r.isPlainObject(e)){return console.error("Please provide an object with at least a `type` property")}if(typeof e.type!=="string"){return console.error("Action was missing a `type` property",e)}}).withLatestFrom(n,a,function(e,t,n){var r=n.filter(function(t){return t.name===e.type});return{action:e,reducers:r.concat(t)}}).scan(function(e,t){var n=t.action,a=t.reducers;var o=n.type||(typeof n==="string"?n:"");if(o.indexOf("@@NS-INIT")===0){return e.setIn(n.payload.path,r.alwaysMap((n.payload||{}).value))}else{return a.reduce(function(e,t){var a=t.type===r.ReducerTypes.MappedReducer?n.payload:n;return e.updateIn(t.path,function(n){return t.fns.reduce(function(t,n){return n.call(null,t,a,e)},n)})},e)}},e)}n.actionStream=a},{"./index":4}],2:[function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a]}return e};Object.defineProperty(n,"__esModule",{value:true});var a=e("./index");function o(e,t,n,o,u){var c={ofType:function(e){return t.filter(function(t){return t.action.type===e})}};i(e);function i(e){var i=Object.assign({},n,o.getValue());a.alwaysArray(e).forEach(function(e){if(typeof e!=="function"){console.error("Effects must be functions, you provided",e)}var n=function(){if(e.triggers&&Array.isArray(e.triggers)){return t.filter(function(t){return~e.triggers.indexOf(t.action.type)})}if(e.trigger&&typeof e.trigger==="string"){return t.filter(function(t){return e.trigger===t.action.type})}return c}();e.call(null,n,i).map(function(t){return r({},t,{via:"[effect]",name:e.name||""})}).forEach(function(e){u(e)})})}}n.addEffects=o},{"./index":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=e("./index");var a;(function(e){e[e["Reducer"]="Reducer"]="Reducer";e[e["MappedReducer"]="MappedReducers"]="MappedReducer";e[e["Effect"]="Effect"]="Effect";e[e["State"]="State"]="State"})(a=n.InputTypes||(n.InputTypes={}));function o(e){return t(e,[]);function t(e,n){return r.alwaysArray(e).reduce(function(e,o){if(typeof o==="function"){return e.concat({type:a.Reducer,payload:{path:[],fns:[o]}})}if(r.isPlainObject(o)){if(o.state){var u,c=void 0,i=void 0;if(o.reducers){u=Object.keys(o.state).reduce(function(e,n){return e.concat(t({path:n,fns:o.reducers},[]))},[])}if(o.effects){i=o.effects}c=o.state;return e.concat(u,{type:a.Effect,payload:i},{type:a.State,payload:c})}if(o.path&&o.reducers){var f=Object.keys(o.reducers).reduce(function(e,t){var n=o.reducers[t];return e.concat({type:a.MappedReducer,payload:{path:[].concat(o.path),fns:[n],name:t,type:r.ReducerTypes.MappedReducer}})},[]);return e.concat(f)}if(o.path&&o.fns){return e.concat({type:a.Reducer,payload:{path:[].concat(o.path).filter(Boolean),fns:[].concat(o.fns).filter(Boolean)}},n)}else{var s=Object.keys(o).reduce(function(e,t){return e.concat({type:a.Reducer,payload:{path:[].concat(t).filter(Boolean),fns:[].concat(o[t]).filter(Boolean)}})},[]);return e.concat(s)}}return e},n)}}n.gatherReducers=o},{"./index":4}],4:[function(e,t,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var a=typeof window!=="undefined"?window["Immutable"]:typeof t!=="undefined"?t["Immutable"]:null;var o=e("./actions");var u=e("./responses");var c=e("./addReducers");var i=e("./addEffects");var f=r.BehaviorSubject;var s=r.Subject;var d;(function(e){e[e["MappedReducer"]="MappedReducer"]="MappedReducer";e[e["GlobalReducer"]="GlobalReducer"]="GlobalReducer"})(d=n.ReducerTypes||(n.ReducerTypes={}));function p(e,t,n,a,d){var p=v(e);var h=new f(p);var w=new f({});var g=new s;g.scan(function(e,t){return Object.assign({},e,t)},{}).subscribe(w);var b=new f([]);var R=new s;R.scan(function(e,t){return e.concat(t)},[]).subscribe(b);var O=new f([]);var x=new s;x.scan(function(e,t){return e.concat(t)},[]).subscribe(O);var m=new f([]);var M=new s;M.scan(function(e,t){return e.concat(t)},[]).subscribe(m);var S=new s;o.actionStream(p,S,b,O).catch(function(e){return r.Observable.throw(e)}).subscribe(h);var j=S.withLatestFrom(h,function(e,t){return{action:e,state:t}});u.handleResponses(j,m).subscribe(function(e){return I(e)});var E={state$:h,action$:S,actionsWithState$:j,actionsWithResultingStateUpdate$:j};function I(e){if(Array.isArray(e)){return e.forEach(function(e){S.onNext(e)})}return S.onNext(e)}function N(e){i.addEffects(e,j,E,w,I)}function _(e){l(e).forEach(function(e){e.call(null,B)})}function T(e){l(e).forEach(function(e){g.onNext(e)})}function P(e){for(var t in e){I({type:"@@NS-INIT("+t+")",payload:{path:[t],value:e[t]}})}}function A(e){l(e).forEach(function(e){Object.keys(e).forEach(function(t){var n=e[t];M.onNext({name:t,path:[].concat(n.path).filter(Boolean),targetName:n.action})})})}function $(e){c.gatherReducers(e).forEach(function(e){if(e.type===c.InputTypes.Reducer){R.onNext(e.payload)}if(e.type===c.InputTypes.MappedReducer){x.onNext(e.payload)}if(e.type===c.InputTypes.State){P(e.payload)}})}var B={state$:h,action$:S,actionsWithState$:j,actionsWithResultingStateUpdate$:j,register:function(e){var t=e.state,n=e.reducers,r=e.effects,a=e.responses;if(t){P(t)}if(n){$(n)}if(r){N(r)}if(a){A(a)}return B},addReducers:function(e){$(e);return B},dispatch:function(e){I(e);return B},getState:function(e){var t=l(e);return h.getValue().getIn(t,y({}))},toJS:function(e){var t=l(e);return h.getValue().getIn(t,y({})).toJS()},toJSON:function(e){var t=l(e);return h.getValue().getIn(t,y({})).toJSON()},addMiddleware:function(e){_(e);return B},once:function(e){var t=l(e);return j.filter(function(e){return t.indexOf(e.action.type)>-1}).take(1)},changes:function(e){var t=l(e);return h.map(function(e){return e.getIn(t)}).distinctUntilChanged()},addExtras:function(e){T(e);return B}};$(t);N(n);_(a);T(d);return B}n.createStore=p;function l(e){return[].concat(e).filter(Boolean)}n.alwaysArray=l;function y(e){return a.Map(e)}n.getMap=y;function v(e){return a.Map.isMap(e)?e:a.fromJS(e||{})}n.alwaysMap=v;function h(e){var t="[object Object]";return Object.prototype.toString.call(e)===t}n.isPlainObject=h;n.default=p;if(typeof window!=="undefined"&&typeof window.staunch==="undefined"){window.staunch={createStore:p}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./actions":1,"./addEffects":2,"./addReducers":3,"./responses":5}],5:[function(e,t,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var a=e("./index");function o(e,t){return e.withLatestFrom(t).filter(function(e){var t=e[0],n=e[1];return n.length>0}).flatMap(function(e){var t=e[0],n=t.action,o=t.state;var u=e[1];var c=n.type;var i=u.filter(function(e){return e.name===c});var f=i.map(function(e){return{type:e.targetName,payload:o.getIn(e.path,a.getMap({})).toJS(),via:"[response to ("+c+")]"}});return r.Observable.from(f)})}n.handleResponses=o}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./index":4}]},{},[4]);
//# sourceMappingURL=browser.min.js.map

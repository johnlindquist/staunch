(function e(t,n,r){function a(i,u){if(!n[i]){if(!t[i]){var c=typeof require=="function"&&require;if(!u&&c)return c(i,!0);if(o)return o(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[i]={exports:{}};t[i][0].call(s.exports,function(e){var n=t[i][1][e];return a(n?n:e)},s,s.exports,e,t,n,r)}return n[i].exports}var o=typeof require=="function"&&require;for(var i=0;i<r.length;i++)a(r[i]);return a})({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=e("./index");function a(e,t,n,a){return t.do(function(e){if(!r.isPlainObject(e)){return console.error("Please provide an object with at least a `type` property")}if(typeof e.type!=="string"){return console.error("Action was missing a `type` property",e)}}).withLatestFrom(n,a,function(e,t,n){var r=n.filter(function(t){return t.name===e.type});return{action:e,reducers:r.concat(t)}}).scan(function(e,t){var n=t.action,a=t.reducers;var o=n.type||(typeof n==="string"?n:"");if(o.indexOf("@@NS-INIT")===0){return e.setIn(n.payload.path,r.alwaysMap((n.payload||{}).value))}else{return a.reduce(function(e,t){var a=t.type===r.ReducerTypes.MappedReducer?n.payload:n;return e.updateIn(t.path,function(n){return t.fns.reduce(function(t,n){return n.call(null,t,a,e)},n)})},e)}},e)}n.actionStream=a},{"./index":4}],2:[function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a]}return e};Object.defineProperty(n,"__esModule",{value:true});var a=e("./index");function o(e,t,n,o,i){var u={ofType:function(e){return t.filter(function(t){return t.action.type===e})}};c(e);function c(e){var c=Object.assign({},n,o.getValue());a.alwaysArray(e).forEach(function(e){if(typeof e!=="function"){console.error("Effects must be functions, you provided",e)}var n=function(){if(e.triggers&&Array.isArray(e.triggers)){return t.filter(function(t){return~e.triggers.indexOf(t.action.type)})}if(e.trigger&&typeof e.trigger==="string"){return t.filter(function(t){return e.trigger===t.action.type})}return u}();e.call(null,n,c).map(function(t){return r({},t,{via:"[effect]",name:e.name||""})}).forEach(function(e){i(e)})})}}n.addEffects=o},{"./index":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=e("./index");function a(e,t,n,a,o){i(e);function i(e){r.alwaysArray(e).forEach(function(e){if(typeof e==="function"){return t.onNext({path:[],fns:[].concat(e).filter(Boolean)})}if(r.isPlainObject(e)){if(e.state){if(e.reducers){Object.keys(e.state).forEach(function(t){i({path:t,fns:e.reducers})})}if(e.effects){a(e.effects)}o(e.state);return}if(e.path&&e.reducers){Object.keys(e.reducers).forEach(function(t){var a=e.reducers[t];n.onNext({path:[].concat(e.path),fns:[a],name:t,type:r.ReducerTypes.MappedReducer})});return}if(e.path&&e.fns){t.onNext({path:[].concat(e.path).filter(Boolean),fns:[].concat(e.fns).filter(Boolean)})}else{for(var u in e){t.onNext({path:[].concat(u).filter(Boolean),fns:[].concat(e[u]).filter(Boolean)})}}}})}}n.addReducers=a},{"./index":4}],4:[function(e,t,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var a=typeof window!=="undefined"?window["Immutable"]:typeof t!=="undefined"?t["Immutable"]:null;var o=e("./actions");var i=e("./responses");var u=e("./addReducers");var c=e("./addEffects");var f=r.BehaviorSubject;var s=r.Subject;var d;(function(e){e[e["MappedReducer"]="MappedReducer"]="MappedReducer";e[e["GlobalReducer"]="GlobalReducer"]="GlobalReducer"})(d=n.ReducerTypes||(n.ReducerTypes={}));function l(e,t,n,a,d){var l=y(e);var h=new f(l);var w=new f({});var b=new s;b.scan(function(e,t){return Object.assign({},e,t)},{}).subscribe(w);var g=new f([]);var O=new s;O.scan(function(e,t){return e.concat(t)},[]).subscribe(g);var x=new f([]);var m=new s;m.scan(function(e,t){return e.concat(t)},[]).subscribe(x);var R=new f([]);var j=new s;j.scan(function(e,t){return e.concat(t)},[]).subscribe(R);var M=new s;o.actionStream(l,M,g,x).catch(function(e){return r.Observable.throw(e)}).subscribe(h);var S=M.withLatestFrom(h,function(e,t){return{action:e,state:t}});i.handleResponses(S,R).subscribe(function(e){return E(e)});var N={state$:h,action$:M,actionsWithState$:S,actionsWithResultingStateUpdate$:S};function E(e){if(Array.isArray(e)){return e.forEach(function(e){M.onNext(e)})}return M.onNext(e)}function _(e){c.addEffects(e,S,N,w,E)}function I(e){p(e).forEach(function(e){e.call(null,$)})}function P(e){p(e).forEach(function(e){b.onNext(e)})}function A(e){for(var t in e){E({type:"@@NS-INIT("+t+")",payload:{path:[t],value:e[t]}})}}function B(e){p(e).forEach(function(e){Object.keys(e).forEach(function(t){var n=e[t];j.onNext({name:t,path:[].concat(n.path).filter(Boolean),targetName:n.action})})})}function T(e){u.addReducers(e,O,m,_,A)}var $={state$:h,action$:M,actionsWithState$:S,actionsWithResultingStateUpdate$:S,register:function(e){var t=e.state,n=e.reducers,r=e.effects,a=e.responses;if(t){A(t)}if(n){T(n)}if(r){_(r)}if(a){B(a)}return $},addReducers:function(e){T(e);return $},dispatch:function(e){E(e);return $},getState:function(e){var t=p(e);return h.getValue().getIn(t,v({}))},toJS:function(e){var t=p(e);return h.getValue().getIn(t,v({})).toJS()},toJSON:function(e){var t=p(e);return h.getValue().getIn(t,v({})).toJSON()},addMiddleware:function(e){I(e);return $},once:function(e){var t=p(e);return S.filter(function(e){return t.indexOf(e.action.type)>-1}).take(1)},changes:function(e){var t=p(e);return h.map(function(e){return e.getIn(t)}).distinctUntilChanged()}};T(t);_(n);I(a);P(d);return $}n.createStore=l;function p(e){return[].concat(e).filter(Boolean)}n.alwaysArray=p;function v(e){return a.Map(e)}n.getMap=v;function y(e){return a.Map.isMap(e)?e:a.fromJS(e||{})}n.alwaysMap=y;function h(e){var t="[object Object]";return Object.prototype.toString.call(e)===t}n.isPlainObject=h;n.default=l;if(typeof window!=="undefined"&&typeof window.staunch==="undefined"){window.staunch={createStore:l}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./actions":1,"./addEffects":2,"./addReducers":3,"./responses":5}],5:[function(e,t,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var a=e("./index");function o(e,t){return e.withLatestFrom(t).filter(function(e){var t=e[0],n=e[1];return n.length>0}).flatMap(function(e){var t=e[0],n=t.action,o=t.state;var i=e[1];var u=n.type;var c=i.filter(function(e){return e.name===u});var f=c.map(function(e){return{type:e.targetName,payload:o.getIn(e.path,a.getMap({})).toJS(),via:"[response to ("+u+")]"}});return r.Observable.from(f)})}n.handleResponses=o}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./index":4}]},{},[4]);
//# sourceMappingURL=browser.min.js.map

(function e(t,n,r){function a(u,c){if(!n[u]){if(!t[u]){var i=typeof require=="function"&&require;if(!c&&i)return i(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return a(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}var o=typeof require=="function"&&require;for(var u=0;u<r.length;u++)a(r[u]);return a})({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=e("./index");function a(e,t,n,a){return t.do(function(e){if(!r.isPlainObject(e)){return console.error("Please provide an object with at least a `type` property")}if(typeof e.type!=="string"){return console.error("Action was missing a `type` property",e)}}).withLatestFrom(n,a,function(e,t,n){var r=n.filter(function(t){return t.name===e.type});return{action:e,reducers:r.concat(t)}}).scan(function(e,t){var n=t.action,a=t.reducers;var o=n.type||(typeof n==="string"?n:"");if(o.indexOf("@@NS-INIT")===0){return e.setIn(n.payload.path,r.alwaysMap((n.payload||{}).value))}else{return a.reduce(function(e,t){var a=t.type===r.ReducerTypes.MappedReducer?n.payload:n;return e.updateIn(t.path,function(n){return t.fns.reduce(function(t,n){return n.call(null,t,a,e)},n)})},e)}},e)}n.actionStream=a},{"./index":4}],2:[function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a]}return e};Object.defineProperty(n,"__esModule",{value:true});var a=e("./index");var o=e("./addReducers");function u(e,t,n,u){var c={ofType:function(e){return t.filter(function(t){return t.action.type===e})}};var i=Object.assign({},n,u.getValue());return a.alwaysArray(e).reduce(function(e,n){if(typeof n!=="function"){console.error("Effects must be functions, you provided",n)}var a=function(){if(n.triggers&&Array.isArray(n.triggers)){return t.filter(function(e){return~n.triggers.indexOf(e.action.type)})}if(n.trigger&&typeof n.trigger==="string"){return t.filter(function(e){return n.trigger===e.action.type})}return c}();var u=n.call(null,a,i);return e.concat({type:o.InputTypes.Effect,payload:u.map(function(e){return r({},e,{via:"[effect]",name:n.name||""})})})},[])}n.gatherEffects=u},{"./addReducers":3,"./index":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=e("./index");var a;(function(e){e[e["Reducer"]="Reducer"]="Reducer";e[e["MappedReducer"]="MappedReducers"]="MappedReducer";e[e["Effect"]="Effect"]="Effect";e[e["State"]="State"]="State"})(a=n.InputTypes||(n.InputTypes={}));function o(e){return t(e,[]);function t(e,n){return r.alwaysArray(e).reduce(function(e,o){if(typeof o==="function"){return e.concat({type:a.Reducer,payload:{path:[],fns:[o]}})}if(r.isPlainObject(o)){if(o.state){var u,c=void 0,i=void 0;if(o.reducers){u=Object.keys(o.state).reduce(function(e,n){return e.concat(t({path:n,fns:o.reducers},[]))},[])}if(o.effects){i=o.effects}c=o.state;return e.concat(u,{type:a.Effect,payload:i},{type:a.State,payload:c})}if(o.path&&o.reducers){var f=Object.keys(o.reducers).reduce(function(e,t){var n=o.reducers[t];return e.concat({type:a.MappedReducer,payload:{path:[].concat(o.path),fns:[n],name:t,type:r.ReducerTypes.MappedReducer}})},[]);return e.concat(f)}if(o.path&&o.fns){return e.concat({type:a.Reducer,payload:{path:[].concat(o.path).filter(Boolean),fns:[].concat(o.fns).filter(Boolean)}},n)}else{var s=Object.keys(o).reduce(function(e,t){return e.concat({type:a.Reducer,payload:{path:[].concat(t).filter(Boolean),fns:[].concat(o[t]).filter(Boolean)}})},[]);return e.concat(s)}}return e},n)}}n.gatherReducers=o},{"./index":4}],4:[function(e,t,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Immutable"]:typeof t!=="undefined"?t["Immutable"]:null;var a=e("./actions");var o=e("./responses");var u=e("./addReducers");var c=e("./addEffects");var i=e("./subjects");var f=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var s=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");e("./../noop.js");var p;(function(e){e[e["MappedReducer"]="MappedReducer"]="MappedReducer";e[e["GlobalReducer"]="GlobalReducer"]="GlobalReducer"})(p=n.ReducerTypes||(n.ReducerTypes={}));function d(e,t,n,r,p){var d=v(e);var h=new f.BehaviorSubject(d);var b=[];var w=new f.BehaviorSubject({});var g=new s.Subject;b.push(g.scan(i.assignFn,{}).subscribe(w));var j=new f.BehaviorSubject([]);var R=new s.Subject;b.push(R.scan(i.concatFn,[]).subscribe(j));var S=new f.BehaviorSubject([]);var O=new s.Subject;b.push(O.scan(i.concatFn,[]).subscribe(S));var x=new f.BehaviorSubject([]);var M=new s.Subject;b.push(M.scan(i.concatFn,[]).subscribe(x));var m=new s.Subject;b.push(a.actionStream(d,m,j,S).subscribe(h));var E=m.withLatestFrom(h,function(e,t){return{action:e,state:t}});b.push(o.handleResponses(E,x).subscribe(function(e){return _(e)}));var I={state$:h,action$:m,actionsWithState$:E,actionsWithResultingStateUpdate$:E};function _(e){if(Array.isArray(e)){return e.forEach(function(e){m.next(e)})}return m.next(e)}function T(e){l(e).forEach(function(e){e.call(null,$)})}function B(e){l(e).forEach(function(e){g.next(e)})}function P(e){for(var t in e){_({type:"@@NS-INIT("+t+")",payload:{path:[t],value:e[t]}})}}function F(e){l(e).forEach(function(e){Object.keys(e).forEach(function(t){var n=e[t];M.next({name:t,path:[].concat(n.path).filter(Boolean),targetName:n.action})})})}function N(e){c.gatherEffects(e,E,I,w).forEach(function(e){if(e.type===u.InputTypes.Effect){b.push(e.payload.subscribe(_))}})}function A(e){u.gatherReducers(e).forEach(function(e){if(e.type===u.InputTypes.Reducer){R.next(e.payload)}if(e.type===u.InputTypes.MappedReducer){O.next(e.payload)}if(e.type===u.InputTypes.State){P(e.payload)}})}var $={isOpen:true,state$:h,action$:m,actionsWithState$:E,actionsWithResultingStateUpdate$:E,register:function(e){var t=e.state,n=e.reducers,r=e.effects,a=e.responses;if(t){P(t)}if(n){A(n)}if(r){N(r)}if(a){F(a)}return $},addReducers:function(e){A(e);return $},dispatch:function(e){_(e);return $},getState:function(e){var t=l(e);return h.getValue().getIn(t,y({}))},toJS:function(e){var t=l(e);return h.getValue().getIn(t,y({})).toJS()},toJSON:function(e){var t=l(e);return h.getValue().getIn(t,y({})).toJSON()},addMiddleware:function(e){T(e);return $},once:function(e){var t=l(e);return E.filter(function(e){return t.indexOf(e.action.type)>-1}).take(1)},changes:function(e){var t=l(e);return h.map(function(e){return e.getIn(t)}).distinctUntilChanged()},addExtras:function(e){B(e);return $},close:function(){if($.isOpen){b.forEach(function(e){return e.unsubscribe()});$.isOpen=false}return $}};A(t);N(n);T(r);B(p);return $}n.createStore=d;function l(e){return[].concat(e).filter(Boolean)}n.alwaysArray=l;function y(e){return r.Map(e)}n.getMap=y;function v(e){return r.Map.isMap(e)?e:r.fromJS(e||{})}n.alwaysMap=v;function h(e){var t="[object Object]";return Object.prototype.toString.call(e)===t}n.isPlainObject=h;n.default=d;if(typeof window!=="undefined"&&typeof window.staunch==="undefined"){window.staunch={createStore:d}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./../noop.js":7,"./actions":1,"./addEffects":2,"./addReducers":3,"./responses":5,"./subjects":6}],5:[function(e,t,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var a=e("./index");function o(e,t){return e.withLatestFrom(t).filter(function(e){var t=e[0],n=e[1];return n.length>0}).flatMap(function(e){var t=e[0],n=t.action,o=t.state;var u=e[1];var c=n.type;var i=u.filter(function(e){return e.name===c});var f=i.map(function(e){return{type:e.targetName,payload:o.getIn(e.path,a.getMap({})).toJS(),via:"[response to ("+c+")]"}});return r.Observable.of(f)})}n.handleResponses=o}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./index":4}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});function r(e,t){return Object.assign({},e,t)}n.assignFn=r;function a(e,t){return e.concat(t)}n.concatFn=a},{}],7:[function(e,t,n){},{}]},{},[4]);
//# sourceMappingURL=browser.min.js.map

(function t(e,n,r){function a(i,c){if(!n[i]){if(!e[i]){var u=typeof require=="function"&&require;if(!c&&u)return u(i,!0);if(o)return o(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[i]={exports:{}};e[i][0].call(s.exports,function(t){var n=e[i][1][t];return a(n?n:t)},s,s.exports,t,e,n,r)}return n[i].exports}var o=typeof require=="function"&&require;for(var i=0;i<r.length;i++)a(r[i]);return a})({1:[function(t,e,n){(function(t){"use strict";var e=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a))t[a]=e[a]}return t};Object.defineProperty(n,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var a=typeof window!=="undefined"?window["Immutable"]:typeof t!=="undefined"?t["Immutable"]:null;var o=r.BehaviorSubject;var i=r.Subject;var c;(function(t){t[t["MappedReducer"]="MappedReducer"]="MappedReducer";t[t["GlobalReducer"]="GlobalReducer"]="GlobalReducer"})(c=n.ReducerTypes||(n.ReducerTypes={}));function u(t,n,u,f,s){var l=T(t);var p=new o(l);var d=new o({});var v=new i;v.scan(function(t,e){return Object.assign({},t,e)},{}).subscribe(d);var y=new i;var h=new o([]);var g=new i;g.scan(function(t,e){return t.concat(e)},[]).subscribe(h);var b=new o([]);var w=new i;w.scan(function(t,e){return t.concat(e)},[]).subscribe(b);var m=new o([]);var O=new i;O.scan(function(t,e){return t.concat(e)},[]).subscribe(m);var N=y.do(function(t){if(!A(t)){return console.error("Please provide an object with at least a `type` property")}if(typeof t.type!=="string"){return console.error("Action was missing a `type` property",t)}}).withLatestFrom(h,b,function(t,e,n){var r=n.filter(function(e){return e.name===t.type});return{action:t,reducers:r.concat(e)}}).scan(function(t,e){var n=e.action,r=e.reducers;var a=n.type||(typeof n==="string"?n:"");if(a.indexOf("@@NS-INIT")===0){return t.setIn(n.payload.path,T((n.payload||{}).value))}else{return r.reduce(function(t,e){var r=e.type===c.MappedReducer?n.payload:n;return t.updateIn(e.path,function(n){return e.fns.reduce(function(e,n){return n.call(null,e,r,t)},n)})},t)}},l).share();N.catch(function(t){return r.Observable.throw(t)}).subscribe(p);var S=y.withLatestFrom(p,function(t,e){return{action:t,state:e}});var x={state$:p,action$:y,actionsWithState$:S,actionsWithResultingStateUpdate$:S};S.withLatestFrom(m).filter(function(t){var e=t[0],n=t[1];return n.length>0}).flatMap(function(t){var e=t[0],n=e.action,a=e.state;var o=t[1];var i=n.type;var c=o.filter(function(t){return t.name===i});var u=c.map(function(t){return{type:t.targetName,payload:a.getIn(t.path,U({})).toJS(),via:"[response to ("+i+")]"}});return r.Observable.from(u)}).subscribe(function(t){return R(t)});function R(t){if(Array.isArray(t)){return t.forEach(function(t){y.onNext(t)})}return y.onNext(t)}function j(t){_(t).forEach(function(t){if(typeof t==="function"){g.onNext({path:[],fns:[].concat(t).filter(Boolean)})}if(A(t)){if(t.state){if(t.reducers){Object.keys(t.state).forEach(function(e){j({path:e,fns:t.reducers})})}if(t.effects){E(t.effects)}B(t.state);return}if(t.path&&t.reducers){Object.keys(t.reducers).forEach(function(e){var n=t.reducers[e];w.onNext({path:[].concat(t.path),fns:[n],name:e,type:c.MappedReducer})});return}if(t.path&&t.fns){g.onNext({path:[].concat(t.path).filter(Boolean),fns:[].concat(t.fns).filter(Boolean)})}else{for(var e in t){g.onNext({path:[].concat(e).filter(Boolean),fns:[].concat(t[e]).filter(Boolean)})}}}})}function E(t){var n={ofType:function(t){return S.filter(function(e){return e.action.type===t})}};var r=Object.assign({},x,d.getValue());_(t).forEach(function(t){if(typeof t!=="function"){console.error("Effects must be functions, you provided",t)}var a=function(){if(t.triggers&&Array.isArray(t.triggers)){return S.filter(function(e){return~t.triggers.indexOf(e.action.type)})}if(t.trigger&&typeof t.trigger==="string"){return S.filter(function(e){return t.trigger===e.action.type})}return n}();t.call(null,a,r).map(function(n){return e({},n,{via:"[effect]",name:t.name||""})}).forEach(function(t){R(t)})})}function I(t){_(t).forEach(function(t){t.call(null,J)})}function M(t){_(t).forEach(function(t){v.onNext(t)})}function B(t){for(var e in t){R({type:"@@NS-INIT("+e+")",payload:{path:[e],value:t[e]}})}}function $(t){_(t).forEach(function(t){Object.keys(t).forEach(function(e){var n=t[e];O.onNext({name:e,path:[].concat(n.path).filter(Boolean),targetName:n.action})})})}var J={state$:p,action$:y,actionsWithState$:S,actionsWithResultingStateUpdate$:S,register:function(t){var e=t.state,n=t.reducers,r=t.effects,a=t.responses;if(e){B(e)}if(n){j(n)}if(r){E(r)}if(a){$(a)}return J},addReducers:function(t){j(t);return J},dispatch:function(t){R(t);return J},getState:function(t){var e=_(t);return p.getValue().getIn(e,U({}))},toJS:function(t){var e=_(t);return p.getValue().getIn(e,U({})).toJS()},toJSON:function(t){var e=_(t);return p.getValue().getIn(e,U({})).toJSON()},addMiddleware:function(t){I(t);return J},once:function(t){var e=_(t);return S.filter(function(t){return e.indexOf(t.action.type)>-1}).take(1)},changes:function(t){var e=_(t);return p.map(function(t){return t.getIn(e)}).distinctUntilChanged()}};j(n);E(u);I(f);M(s);function T(t){return a.Map.isMap(t)?t:a.fromJS(t||{})}function _(t){return[].concat(t).filter(Boolean)}function A(t){var e="[object Object]";return Object.prototype.toString.call(t)===e}function U(t){return a.Map(t)}return J}n.createStore=u;n.default=u;if(window&&typeof window.staunch==="undefined"){window.staunch={createStore:u}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);
//# sourceMappingURL=browser.min.js.map

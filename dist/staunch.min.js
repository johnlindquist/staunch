(function t(n,e,r){function a(i,c){if(!e[i]){if(!n[i]){var u=typeof require=="function"&&require;if(!c&&u)return u(i,!0);if(o)return o(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var s=e[i]={exports:{}};n[i][0].call(s.exports,function(t){var e=n[i][1][t];return a(e?e:t)},s,s.exports,t,n,e,r)}return e[i].exports}var o=typeof require=="function"&&require;for(var i=0;i<r.length;i++)a(r[i]);return a})({1:[function(t,n,e){(function(t){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a))t[a]=n[a]}return t};Object.defineProperty(e,"__esModule",{value:true});var r=typeof window!=="undefined"?window["Rx"]:typeof t!=="undefined"?t["Rx"]:null;var a=typeof window!=="undefined"?window["Immutable"]:typeof t!=="undefined"?t["Immutable"]:null;var o=r.BehaviorSubject;var i=r.Subject;function c(t,e,c,u,f){var s=_(t);var l=new o(s);var p=new o({});var d=new i;d.scan(function(t,n){return Object.assign({},t,n)},{}).share().subscribe(p);var v=new i;var h=new o([]);var y=new i;y.scan(function(t,n){return t.concat(n)},[]).share().subscribe(h);var w=new o([]);var b=new i;b.scan(function(t,n){return t.concat(n)},[]).share().subscribe(w);var g=new o([]);var m=new i;m.scan(function(t,n){return t.concat(n)},[]).share().subscribe(g);var O=v.do(function(t){if(!U(t)){return console.error("Please provide an object with at least a `type` property")}if(typeof t.type!=="string"){return console.error("Action was missing a `type` property",t)}}).withLatestFrom(h,w,function(t,n,e){var r=e.filter(function(n){return n.name===t.type});return{action:t,reducers:r.concat(n)}}).scan(function(t,n){var e=n.action,r=n.reducers;var a=e.type||(typeof e==="string"?e:"");if(a.indexOf("@@NS-INIT")===0){return t.setIn(e.payload.path,_((e.payload||{}).value))}else{return r.reduce(function(t,n){return t.updateIn(n.path,function(r){return n.fns.reduce(function(n,r){return r.call(null,n,e,t)},r)})},t)}},s).share();O.catch(function(t){return r.Observable.throw(t)}).subscribe(l);var N=v.withLatestFrom(l,function(t,n){return{action:t,state:n}});var S={state$:l,action$:v,actionsWithState$:N,actionsWithResultingStateUpdate$:N};N.withLatestFrom(g).filter(function(t){var n=t[0],e=t[1];return e.length>0}).flatMap(function(t){var n=t[0],e=n.action,a=n.state;var o=t[1];var i=e.type;var c=o.filter(function(t){return t.name===i});var u=c.map(function(t){return{type:t.targetName,payload:a.getIn(t.path,k({})).toJS(),via:"[response to ("+i+")]"}});return r.Observable.from(u)}).subscribe(function(t){return x(t)});function x(t){if(Array.isArray(t)){return t.forEach(function(t){v.onNext(t)})}return v.onNext(t)}function j(t){R(t).forEach(function(t){if(typeof t==="function"){y.onNext({path:[],fns:[].concat(t).filter(Boolean)})}if(U(t)){if(t.state){if(t.reducers){Object.keys(t.state).forEach(function(n){j({path:n,fns:t.reducers})})}if(t.effects){I(t.effects)}$(t.state);return}if(t.path&&t.reducers){Object.keys(t.reducers).forEach(function(n){var e=t.reducers[n];b.onNext({path:[].concat(t.path),fns:[e],name:n})});return}if(t.path&&t.fns){y.onNext({path:[].concat(t.path).filter(Boolean),fns:[].concat(t.fns).filter(Boolean)})}else{for(var n in t){y.onNext({path:[].concat(n).filter(Boolean),fns:[].concat(t[n]).filter(Boolean)})}}}})}function I(t){var e={ofType:function(t){return N.filter(function(n){return n.action.type===t})}};var r=Object.assign({},S,p.getValue());R(t).forEach(function(t){t.call(null,e,r).map(function(e){return n({},e,{via:"[effect]",name:t.name||""})}).forEach(function(t){x(t)})})}function E(t){R(t).forEach(function(t){t.call(null,J)})}function B(t){R(t).forEach(function(t){d.onNext(t)})}function $(t){for(var n in t){x({type:"@@NS-INIT("+n+")",payload:{path:[n],value:t[n]}})}}function M(t){R(t).forEach(function(t){Object.keys(t).forEach(function(n){var e=t[n];m.onNext({name:n,path:[].concat(e.path).filter(Boolean),targetName:e.action})})})}var J={state$:l,action$:v,actionsWithState$:N,actionsWithResultingStateUpdate$:N,register:function(t){var n=t.state,e=t.reducers,r=t.effects,a=t.responses;if(e){j(e)}if(r){I(r)}if(n){$(n)}if(a){M(a)}return J},addReducers:function(t){j(t);return J},dispatch:function(t){x(t);return J},getState:function(t){var n=R(t);return l.getValue().getIn(n,k({}))},toJS:function(t){var n=R(t);return l.getValue().getIn(n,k({})).toJS()},toJSON:function(t){var n=R(t);return l.getValue().getIn(n,k({})).toJSON()},addMiddleware:function(t){E(t);return J},once:function(t){var n=R(t);return N.filter(function(t){return n.indexOf(t.action.type)>-1}).take(1)},changes:function(t){var n=R(t);return l.map(function(t){return t.getIn(n)}).distinctUntilChanged()}};j(e);I(c);E(u);B(f);function _(t){return a.Map.isMap(t)?t:a.fromJS(t||{})}function R(t){return[].concat(t).filter(Boolean)}function U(t){var n="[object Object]";return Object.prototype.toString.call(t)===n}function k(t){return a.Map(t)}return J}e.createStore=c;e.default=c;if(window&&typeof window.staunch==="undefined"){window.staunch={createStore:c}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);
//# sourceMappingURL=browser.min.js.map
